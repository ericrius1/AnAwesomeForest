<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Forest</title>
        <meta name="description" content="">
        <!-- This assumes your project will be responsive -->
        <meta name="viewport" content="width=device-width">
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <link rel="stylesheet" href="css/main.css">


        <script src="js/vendor/three.min.js"></script>
        <script src="js/vendor/Mirror.js"></script>
        <script src="js/vendor/WaterShader.js"></script>
        <script src="js/vendor/ShaderParticles.js"></script>
        <script src="assets/helvetiker_regular.typeface.js"></script>
        <script src="js/vendor/underscore.js"></script>
        <script src="js/vendor/tween.min.js"></script>
        <script src="js/vendor/CurveExtras.js"></script>
        <script src="js/vendor/PointerLockControls.js"></script>
        <script src="js/vendor/Class.js"></script>
       
        <script src="js/e.js"></script>
        <script src="js/classes/e.EventEmitter.js"></script>
        <script src="js/classes/e.Keyboard.js"></script>
        <script src="js/classes/e.Player.js"></script>
        <script src="js/classes/e.World.js"></script>
        <script src="js/classes/e.Ocean.js"></script>
        <script src="js/classes/e.Bird.js"></script>
        <script src="js/classes/e.Appalapas.js"></script>
        <script src="js/classes/e.Pond.js"></script>
        <script src="js/classes/e.Forest.js"></script>
        <script src="js/classes/e.Controls.js"></script>
        <script src="js/classes/e.Game.js"></script>

        <!-- // <script src = "build/game.js"></script> -->

      <script id="vertexShader" type="x-shader/x-vertex">
        varying float y;
        uniform float height;

        void main() {
          y = position.y / height;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }

      </script>

      <script id="fragmentShader" type="x-shader/x-fragment">
        varying float y;
        void main() {
          float y2 = pow(y, 2.5);
          float r = mix(0.23, 0.67, y2 );
          float g = mix(0.09, 0.188, y2);
          gl_FragColor = vec4(r, g, 0.047, 1.0);

        }

      </script>

      <script id="leafVertexShader" type="x-shader/x-vertex">

        precision mediump float;
        precision mediump int;

        uniform float width;
        uniform float time;
        uniform float startingTime;

        attribute float pivotPoint;
        attribute float wind;


        varying float x;

        void main() {
          vec3 newPos = position;
          if(pivotPoint > 0.5){
            newPos.z = position.z + sin(time * (5. * wind)) * (2. * wind);
          }
          x = abs(position.x/width);

          gl_Position = projectionMatrix * modelViewMatrix * vec4( newPos, 1.0 );

        }

    </script>

    <script id="leafFragmentShader" type="x-shader/x-fragment">

      precision mediump float;
      precision mediump int;


      uniform float time;


      varying float x;

      void main() {
        float r = mix(0., 1., x);
        vec4 color = vec4(r, 0., 0., 0.5 );
        color.g += sin( x + time * 0.05 );

        gl_FragColor = color;

      }

    </script>

    <script id =  "appalapasVertexShader" type = "x-shader/x-vertex">
      uniform float height;
      uniform float ballHeight;
      varying float distance;
      void main(){
        //Get distance of current yPos to where the ball is
        distance = abs(ballHeight - position.y);
        distance = pow(distance, 2.5)/height;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    </script>


    <script id =  "appalapasFragmentShader" type = "x-shader/x-fragment">
      varying float distance;
      void main(){

        float r = mix(1.0, 0.0, distance);
        vec3 color = vec3(r, 0.0, 0.0);
        gl_FragColor = vec4(color, 1.0);
      }
    </script>
       

        <script>
          window.onload = function(){
            e.init();
          }
        </script>
    </head>
    <body>
      <div id="blocker">

        <div id="instructions">
          <div style="font-size: 50px">Welcome To Appalapagos Island!</span>
          <div style="font-size:40px">Click to Explore</div>
          <br />
          (W, A, S, D = Move, SPACE = Jump, MOUSE = Look around)
        </div>

      </div>
      <div id = "pointer"></div>

  

    </body>
</html>
